import{c as _,j as e,m as Q,l as U,s as V,S as K,H as W,o as P,_ as y,R as Y,b as c,q as J,t as X,v as Z,w as ee,r as te,i as ae,I as se,N as oe,G as R,g as re,C as O,a as E,T as j,z as ne,Q as A,y as ce,B as N}from"./index-DAQkB8Or.js";import{d as ie,M as le,r as de,a as he,b as pe,c as ue,e as xe,f as me}from"./Visibility-D_PdAmkR.js";import{Q as ge,B as D,H as be}from"./react-toastify.esm-CxVbbRne.js";import{T as je,_ as fe}from"./TotalGrowthBarChart-CzOO81-2.js";import{a as ke}from"./axios-DbhgdiIy.js";import{T as ve,a as Ce,b as ye,c as L,d as n,e as Fe,f as we}from"./TableRow-I-FtpPTN.js";const Pe=_(e.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Se=_(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),ze=_(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Be(t){return U("MuiCheckbox",t)}const M=Q("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Ie=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Re=t=>{const{classes:a,indeterminate:o,color:l,size:h}=t,p={root:["root",o&&"indeterminate",`color${P(l)}`,`size${P(h)}`]},m=ee(p,Be,a);return y({},a,m)},Me=V(K,{shouldForwardProp:t=>W(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,o.indeterminate&&a.indeterminate,a[`size${P(o.size)}`],o.color!=="default"&&a[`color${P(o.color)}`]]}})(({theme:t,ownerState:a})=>y({color:(t.vars||t).palette.text.secondary},!a.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${a.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[a.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Y(a.color==="default"?t.palette.action.active:t.palette[a.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},a.color!=="default"&&{[`&.${M.checked}, &.${M.indeterminate}`]:{color:(t.vars||t).palette[a.color].main},[`&.${M.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),_e=e.jsx(Se,{}),Te=e.jsx(Pe,{}),$e=e.jsx(ze,{}),q=c.forwardRef(function(a,o){var l,h;const p=J({props:a,name:"MuiCheckbox"}),{checkedIcon:m=_e,color:u="primary",icon:i=Te,indeterminate:g=!1,indeterminateIcon:f=$e,inputProps:F,size:x="medium",className:S}=p,$=X(p,Ie),k=g?f:i,w=g?f:m,v=y({},p,{color:u,indeterminate:g,size:x}),C=Re(v);return e.jsx(Me,y({type:"checkbox",inputProps:y({"data-indeterminate":g},F),icon:c.cloneElement(k,{fontSize:(l=k.props.fontSize)!=null?l:x}),checkedIcon:c.cloneElement(w,{fontSize:(h=w.props.fontSize)!=null?h:x}),ownerState:v,ref:o,className:Z(C.root,S)},$,{classes:C}))});var T={},He=ae;Object.defineProperty(T,"__esModule",{value:!0});var G=T.default=void 0,Oe=He(te()),Ee=e;G=T.default=(0,Oe.default)((0,Ee.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");const Ue=()=>{const{instance:t}=se();if(!t.getActiveAccount())return e.jsx(oe,{to:"/login",replace:!0});const[o,l]=c.useState([]),[h,p]=c.useState(!0),[m,u]=c.useState(!1),[i,g]=c.useState(""),[f,F]=c.useState(0),[x,S]=c.useState(5),[$,k]=c.useState({options:{chart:{type:"line",toolbar:{show:!1}},xaxis:{categories:["Total Feedback","Accepted","Rejected"]},colors:["#00BFFF"],stroke:{curve:"smooth"},dataLabels:{enabled:!0},grid:{borderColor:"#e0e0e0"}}});o.map(s=>s.accept==!0?1:2),c.useEffect(()=>{(async()=>{try{const d=await fetch("https://bu-fos-mastermind.solutions-apps.com/ai/feedbacks");if(!d.ok)throw new Error("Network response was not ok");const b=await d.json();l(b);const z=b.length,B=b.filter(r=>r.accept===!0).length,I=b.filter(r=>r.accept===!1).length;k(r=>({...r,series:[{name:"Feedback Stats",data:[z,B,I]}]}))}catch(d){console.error("Error fetching feedbacks:",d)}finally{p(!1)}})()},[]);const w=s=>{g(s),u(!0)},v=()=>{u(!1),g("")},C=async(s,d)=>{try{const z=(await ke.put(`https://bu-fos-mastermind.solutions-apps.com/ai/feedbacks/${s}`,null,{params:{accept_update:d}})).data;l(r=>r.map(H=>H.id===s?z:H));const B=o.filter(r=>r.accept===!0).length,I=o.filter(r=>r.accept===!1).length;k(r=>({...r,series:[{name:"Feedback Stats",data:[o.length,B,I]}]})),D.success(`Feedback ${d?"accepted":"rejected"} successfully!`,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:be})}catch(b){console.error("Error updating feedback:",b),D.error("Error updating feedback.")}};return h?e.jsx(je,{}):e.jsxs(R,{container:!0,spacing:re,children:[e.jsx(R,{item:!0,xs:12,children:e.jsx(O,{style:{width:"100%",marginBottom:"20px"},children:e.jsxs(E,{children:[e.jsx(j,{variant:"h6",gutterBottom:!0,children:"Feedback Statistics"}),e.jsx(Ae,{feedbacks:o})]})})}),e.jsx(R,{item:!0,xs:12,children:e.jsx(O,{style:{width:"100%"},children:e.jsxs(E,{children:[e.jsx(j,{variant:"h6",gutterBottom:!0,children:"Feedback Management"}),e.jsx(ve,{component:ne,style:{width:"100%"},children:e.jsxs(Ce,{"aria-label":"feedback management table",children:[e.jsx(ye,{children:e.jsxs(L,{children:[e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Username"}),e.jsx(n,{children:"Message"}),e.jsx(n,{align:"center",children:"Accept"}),e.jsx(n,{align:"center",children:"Reject"}),e.jsx(n,{align:"center",children:"Actions"})]})}),e.jsx(Fe,{children:o.slice(f*x,f*x+x).map(s=>e.jsxs(L,{children:[e.jsx(n,{children:s.name}),e.jsx(n,{children:s.username}),e.jsx(n,{children:s.message}),e.jsx(n,{align:"center",children:e.jsx(q,{checked:s.accept===!0,onChange:()=>C(s.id,!0),color:"primary"})}),e.jsx(n,{align:"center",children:e.jsx(q,{checked:s.accept===!1,onChange:()=>C(s.id,!1),color:"secondary"})}),e.jsx(n,{align:"center",children:e.jsx(A,{"aria-label":"show",onClick:()=>w(s),children:e.jsx(ie,{})})})]},s.id))})]})}),e.jsx(we,{rowsPerPageOptions:[5,10,25],component:"div",count:o.length,rowsPerPage:x,page:f,onPageChange:(s,d)=>F(d),onRowsPerPageChange:s=>{S(parseInt(s.target.value,10)),F(0)}})]})})}),e.jsx(ge,{}),e.jsx(ce,{open:m,onClose:v,"aria-labelledby":"modal-title","aria-describedby":"modal-description",children:e.jsxs(N,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:"16px",width:"80%",maxHeight:"80vh",overflow:"auto"},children:[e.jsx(j,{id:"modal-title",variant:"h3",component:"h2",children:"Feedback Message"}),e.jsxs(N,{sx:{maxHeight:"50vh",overflowY:"auto",mt:2},children:[e.jsx(j,{id:"modal-description",sx:{mb:2},children:i==null?void 0:i.message}),e.jsx("div",{style:{height:8}}),e.jsx(j,{id:"modal-title",variant:"h3",component:"h2",children:"Feedback Quiz"}),e.jsx("div",{style:{height:8}}),e.jsxs(j,{id:"modal-title",variant:"h5",component:"h2",children:[" ",i==null?void 0:i.reference]}),e.jsx("div",{style:{height:20}}),e.jsx(j,{id:"modal-title",variant:"h3",component:"h2",children:"Feedback Response"}),e.jsx("div",{style:{height:8}}),e.jsx(le,{remarkPlugins:[de,he,pe],rehypePlugins:[ue,[xe,{detect:!0,ignoreMissing:!1}],me],children:i==null?void 0:i.response})]}),e.jsx(A,{onClick:v,"aria-label":"close",sx:{mt:2,position:"absolute",top:8,right:8},children:e.jsx(G,{})})]})})]})},Ae=({feedbacks:t})=>{const a=t.length,o=t.filter(u=>u.accept===!0).length,l=t.filter(u=>u.accept===!1).length,[h,p]=c.useState({options:{chart:{type:"line",toolbar:{show:!1}},xaxis:{categories:["Total Feedback","Accepted","Rejected"]},colors:["#00BFFF"],stroke:{curve:"smooth"},dataLabels:{enabled:!0},grid:{borderColor:"#e0e0e0"}}}),m=[{name:"Feedback Counts",data:[a,o,l]}];return e.jsx(fe,{...h,series:m,height:350})};export{Ue as default};
